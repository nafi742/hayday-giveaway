<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Hay Day Elite Farmers - Bangladesh Giveaway</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Noto Sans Bengali',Arial,sans-serif;
  text-align:center;
}
.board{
  display:grid;
  grid-template-columns:repeat(3,90px);
  gap:6px;
  justify-content:center;
  margin-top:15px;
}
.cell{
  width:90px;
  height:90px;
  font-size:36px;
  background:#f2f2f2;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:6px;
}
button,input{
  margin-top:10px;
  padding:8px;
  font-size:16px;
}
</style>
</head>

<body>

<h2>Hay Day Elite Farmers - Bangladesh</h2>
<b>Giveaway</b>
<p>Winning Chance: 5%</p>
<p>‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ï‡¶á ‡¶®‡¶æ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡ßá‡¶∞‡¶æ, ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶ï‡¶á ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡ßá‡¶∞‡¶æ‡•§</p>

<input id="haydayId" placeholder="Hay Day ID ‡¶¶‡¶ø‡¶®">
<br>
<button onclick="startSession()">Start Game</button>

<p id="message"></p>

<div class="board" id="board"></div>
<p id="result"></p>

<button onclick="resetGame()">üîÑ Play Again</button>

<p>‡¶ñ‡ßá‡¶≤‡¶æ ‡¶ú‡¶®‡ßç‡¶Ø Hay Day Elite Farmers - Bangladesh ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡¶¶‡ßá‡¶∞ ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶•‡ßá‡¶ï‡ßá ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶</p>

<script>
let board=[],gameOver=false,allowWin=false,playerId="";
const winPatterns=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8]];
const boardDiv=document.getElementById("board");
const result=document.getElementById("result");
let playData=JSON.parse(localStorage.getItem("playData"))||{};

function startSession(){
  playerId=document.getElementById("haydayId").value.trim();
  if(!playerId){alert("Hay Day ID ‡¶¶‡¶ø‡¶®");return;}
  playData[playerId]=(playData[playerId]||0)+1;
  localStorage.setItem("playData",JSON.stringify(playData));
  let count=playData[playerId];
  allowWin=(count>=15 && count%50===0);
  document.getElementById("message").innerHTML=
  "‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶!<br>‡¶Ü‡¶™‡¶®‡¶ø "+count+" ‡¶¨‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡ßá‡¶õ‡ßá‡¶®";
  startGame();
}

function startGame(){
  board=Array(9).fill("");
  gameOver=false;
  boardDiv.innerHTML="";
  result.innerText="";
  for(let i=0;i<9;i++){
    let c=document.createElement("div");
    c.className="cell";
    c.onclick=()=>playerMove(i,c);
    boardDiv.appendChild(c);
  }
}

function playerMove(i,c){
  if(board[i]||gameOver)return;
  board[i]="X"; c.innerText="X";
  if(checkWin("X")){
    result.innerText=allowWin?"üéâ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®!":"üòê Draw";
    gameOver=true;return;
  }
  botMove();
}

function botMove(){
  let empty=board.map((v,i)=>v==""?i:null).filter(v=>v!==null);
  if(empty.length===0)return;
  let move=findBestMove("O") ?? empty[Math.floor(Math.random()*empty.length)];
  board[move]="O";
  boardDiv.children[move].innerText="O";
  if(checkWin("O")){
    result.innerText="‚ùå ‡¶Ü‡¶™‡¶®‡¶ø ‡¶π‡ßá‡¶∞‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®";
    gameOver=true;
  }
}

function findBestMove(p){
  for(let w of winPatterns){
    let cells=w.map(i=>board[i]);
    if(cells.filter(v=>v===p).length===2 && cells.includes("")){
      return w[cells.indexOf("")];
    }
  }
  return null;
}

function checkWin(p){
  return winPatterns.some(w=>w.every(i=>board[i]===p));
}

function resetGame(){
  if(playerId)startGame();
}
</script>

</body>
</html>
